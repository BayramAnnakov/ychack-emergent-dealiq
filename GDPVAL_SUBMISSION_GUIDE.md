# GDPval Submission Guide for DealIQ

## Overview

This guide explains how to submit DealIQ's results to the GDPval automated grader for evaluation.

## Current Status

- âœ… GDPval integration complete
- âœ… Focused on "Sales Representatives, Wholesale and Manufacturing" occupation (5 tasks)
- âœ… BenchmarkOrchestrator with Claude Agent SDK configured
- âœ… xlsx Skill enabled for Excel formula generation
- ðŸš§ Executing XR retailer makeup analysis task (Task 3)
- ðŸ“‹ Pending: HuggingFace dataset submission

## Task Being Executed

**Task ID**: 19403010-3e5c-494e-a6d3-13594e99f6af
**Occupation**: Sales Representatives, Wholesale and Manufacturing
**Sector**: Wholesale Trade
**Description**: XR retailer makeup sales analysis for 2023

The task requires analyzing real Excel data (`DATA_XR_MU_2023.xlsx`) to create:
1. Overall business metrics (TY vs LY comparison)
2. Discontinued SKUs risk analysis
3. Top volume drivers by function
4. Bottom performers analysis
5. Trends and recommendations

All calculations must use Excel formulas (not hardcoded values).

## Submission Process

### Step 1: Complete Task Execution

Run the GDPval test to execute tasks:

```bash
cd backend
export PATH="/usr/local/bin:$PATH"
./venv/bin/python test_gdpval.py --mode single
```

This will:
- Load the XR retailer task
- Execute using BenchmarkOrchestrator with xlsx Skill
- Generate Excel output with formulas
- Save results to `data/gdpval/outputs/`

### Step 2: Prepare Dataset Structure

The submission requires duplicating the OpenAI dataset and adding columns.

#### 2.1 Duplicate the Dataset

1. Go to https://huggingface.co/spaces/huggingface/repo_duplicator
2. Duplicate `openai/gdpval` to your HuggingFace account
3. Name it something like `yourusername/gdpval-dealiq-submission`

#### 2.2 Add Required Columns

Add these two columns to your duplicated dataset:

```python
# Column 1: deliverable_text (string)
# Contains the text analysis output from Claude

# Column 2: deliverable_files (list)
# Contains paths to Excel files generated
# Format: ["deliverable_files/task_001_output.xlsx"]
```

### Step 3: Upload Deliverable Files

Create the directory structure in your HuggingFace dataset:

```
yourusername/gdpval-dealiq-submission/
â”œâ”€â”€ deliverable_files/
â”‚   â”œâ”€â”€ 19403010-3e5c-494e-a6d3-13594e99f6af_output.xlsx
â”‚   â””â”€â”€ ... (other task outputs)
â””â”€â”€ (dataset files)
```

Upload files from `backend/data/gdpval/outputs/` to `deliverable_files/` in the dataset.

### Step 4: Update Dataset Table

For each task executed, add:

1. **deliverable_text**: The analysis text generated by Claude
2. **deliverable_files**: List of paths to output files

Example row update:
```json
{
  "task_id": "19403010-3e5c-494e-a6d3-13594e99f6af",
  "deliverable_text": "Analysis complete. Created Excel report with 5 sections...",
  "deliverable_files": ["deliverable_files/19403010-3e5c-494e-a6d3-13594e99f6af_output.xlsx"],
  // ... other existing columns
}
```

### Step 5: Submit for Grading

1. Make your dataset public on HuggingFace
2. Go to https://evals.openai.com/gdpval/grading
3. Fill out the form:
   - **HuggingFace dataset URL**: `https://huggingface.co/datasets/yourusername/gdpval-dealiq-submission`
   - **Contact email**: Your email
   - **Model name**: `dealiq-claude-sonnet-4-5-20250929`
   - **Notes**: "DealIQ AI-powered CRM intelligence using Claude Agent SDK with xlsx Skill for formula generation"

### Step 6: Wait for Results

OpenAI will:
1. Pull your submissions
2. Run their automated grader
3. Share results via email

The grading evaluates:
- Correctness of calculations
- Proper use of formulas
- Professional formatting
- Completeness of analysis
- Insights quality

## Files Generated

After execution, you should have:

```
backend/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ gdpval/
â”‚       â”œâ”€â”€ outputs/
â”‚       â”‚   â””â”€â”€ 19403010-3e5c-494e-a6d3-13594e99f6af_output.xlsx
â”‚       â”œâ”€â”€ submission.csv
â”‚       â””â”€â”€ reference_files/
â”‚           â””â”€â”€ DATA_XR_MU_2023.xlsx (input file)
```

## Technical Stack Used

- **Orchestrator**: BenchmarkOrchestrator (extends StreamingOrchestrator)
- **SDK**: Claude Agent SDK (Python)
- **Model**: claude-sonnet-4-5-20250929
- **Skills**: xlsx Skill from Anthropic (enables Excel formula generation)
- **Tools**: Read, Write, Bash, Skill, Grep, Glob

## Key Features

1. **Dual-Mode Operation**: Ad-hoc CRM queries + GDPval benchmarks
2. **Formula Generation**: Uses xlsx Skill for proper Excel formulas
3. **Streaming**: Real-time progress updates during execution
4. **Professional Output**: Executive-ready Excel reports

## Troubleshooting

If execution fails:
1. Check PATH includes `/usr/local/bin` (for Node.js)
2. Ensure venv is activated
3. Verify reference file exists: `data/gdpval/reference_files/DATA_XR_MU_2023.xlsx`
4. Check Claude API key is set in `.env`

## Next Steps

1. Monitor current task execution
2. Review generated Excel output
3. Execute remaining 4 Sales Representatives tasks
4. Create HuggingFace dataset
5. Submit for grading
6. Compare scores to SOTA baseline

## Success Metrics

Goal: Beat SOTA on sales analytics tasks by leveraging:
- Claude's advanced reasoning
- Agent Skills for professional Excel generation
- Domain-specific prompting for sales analysis
- Formula-based calculations (not hardcoded)

## Contact

For issues with:
- DealIQ: Check this codebase
- GDPval: https://evals.openai.com/gdpval
- Claude SDK: https://github.com/anthropics/claude-agent-sdk